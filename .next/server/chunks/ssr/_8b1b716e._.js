module.exports=[92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},1304,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["default",()=>b])},29664,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(21937),f=a.i(77687);function g({children:a,requiredRole:g}){let{user:h,isLoading:i}=(0,e.useAuth)(),j=(0,d.useRouter)(),[k,l]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{if(i||h){if(!i&&g&&h?.role&&h.role!==g){let a="vendor"===h.role?"/vendor/portal":"contractor"===h.role?"/contractor/dashboard":"/manager/dashboard";j.replace(a)}}else j.replace("vendor"===g?"/vendor/sign-in":"contractor"===g?"/contractor/sign-in":"/auth/sign-in")},[h,i,g,j]),i)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"inline-block",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(g&&h?.role!==g)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"inline-block",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Redirecting to your dashboard..."})]})});if(!h)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"inline-block",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Redirecting to sign in..."})]})});if(h&&h.role&&g&&h.role===g&&!1===h.isVerified){let a=async()=>{try{l(!0);let a=await fetch("/api/auth/verification/resend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email})});if(a.ok)(0,f.toast)({title:"Verification email sent",description:"Check your inbox to complete verification"});else{let b=await a.json().catch(()=>({}));(0,f.toast)({title:"Please wait before resending",description:String(b?.error||"Try again later"),variant:"destructive"})}}catch{(0,f.toast)({title:"Failed to resend",description:"Try again later",variant:"destructive"})}finally{l(!1)}};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("p",{className:"text-foreground font-semibold",children:"Email verification required"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["We sent a verification link to ",h.email,". Complete verification to access your dashboard."]}),(0,b.jsx)("button",{onClick:a,disabled:k,className:"inline-flex items-center px-4 py-2 rounded bg-primary text-white disabled:opacity-50",children:k?"Sending...":"Resend verification email"})]})})}return(0,b.jsx)(b.Fragment,{children:a})}a.s(["ProtectedRoute",()=>g])},81010,a=>{"use strict";let b=(0,a.i(70106).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);a.s(["Home",()=>b],81010)},75955,a=>{"use strict";var b=a.i(1304);a.s(["SendIcon",()=>b.default])},23519,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(40695),f=a.i(3130),g=a.i(21958),h=a.i(75955),i=a.i(16201);let j=(0,a.i(70106).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var k=a.i(92e3),l=a.i(81010),m=a.i(63491),n=a.i(21937),o=a.i(72131),p=a.i(29664);function q(){let a=(0,d.useRouter)(),{procurements:p,getQuotes:q}=(0,m.useProcurements)(),{user:r}=(0,n.useAuth)(),[s,t]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{if(!r?.id)return;let a=await fetch(`/api/wallet/${r.id}`,{headers:{}});a.ok&&t(Number((await a.json()).balance||0))})()},[r?.id]);let u=p.filter(a=>a.isPublic&&"open"===a.status),v=p.flatMap(a=>q(a.id)),w=p.filter(a=>"awarded"===a.status&&a.selectedQuoteId),x=[],y=a=>{switch(a){case"open":return(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-semibold",children:"Open"});case"quoted":return(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold",children:"Already Quoted"});case"awarded":return(0,b.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs font-semibold",children:"Awarded"});case"pending":return(0,b.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-semibold",children:"Pending Review"});case"pending-delivery":return(0,b.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-semibold",children:"Pending Delivery"});case"delivered":return(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-semibold",children:"Delivered"});default:return null}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"p-2 hover:bg-accent/10 rounded-lg transition-colors",title:"Go to home",children:(0,b.jsx)(l.Home,{className:"w-5 h-5 text-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Vendor Portal"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"View procurement requests and manage quotes"})]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[r?.id&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(f.Card,{className:"bg-primary/5 border-primary/20",children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Escrow Wallet"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:null==s?"Loading...":new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(s)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This is a virtual wallet. Real payouts not available until financial API integration."})]})})}),(0,b.jsxs)(g.Tabs,{defaultValue:"requests",className:"space-y-6",children:[(0,b.jsxs)(g.TabsList,{children:[(0,b.jsx)(g.TabsTrigger,{value:"requests",children:"Available Requests"}),(0,b.jsx)(g.TabsTrigger,{value:"myquotes",children:"My Quotes"}),(0,b.jsx)(g.TabsTrigger,{value:"awarded",children:"Active Contracts"}),(0,b.jsx)(g.TabsTrigger,{value:"delivered",children:"Completed"})]}),(0,b.jsx)(g.TabsContent,{value:"requests",className:"space-y-4",children:u.length>0?u.map(a=>(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50 hover:border-primary/30 transition-colors",children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.item}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.specification}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Project ",a.projectId," • ",a.deliveryLocation]})]}),y(a.status)]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 pb-4 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Quantity"}),(0,b.jsxs)("p",{className:"font-semibold",children:[a.quantity," ",a.unit]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Posted"}),(0,b.jsx)("p",{className:"font-semibold text-sm",children:a.createdAt})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Status"}),(0,b.jsx)("p",{className:"font-semibold",children:"Open"})]})]}),(0,b.jsx)(c.default,{href:`/vendor/portal/quote/${a.id}`,children:(0,b.jsxs)(e.Button,{className:"w-full bg-primary hover:bg-primary/90",children:[(0,b.jsx)(h.SendIcon,{className:"w-4 h-4 mr-2"}),"Submit Quote"]})})]})},a.id)):(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"No open requests available"})})}),(0,b.jsx)(g.TabsContent,{value:"myquotes",className:"space-y-4",children:v.length>0?v.map(a=>(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h3",{className:"font-semibold",children:["Quote #",a.id]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Submitted ",a.submittedAt]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:a.totalPrice}),(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold",children:a.status})]})]})})},a.id)):(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"No quotes submitted yet"})})}),(0,b.jsx)(g.TabsContent,{value:"awarded",className:"space-y-4",children:w.length>0?w.map(a=>(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.item}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Request ",a.id]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:[a.quantity," ",a.unit," • ",a.deliveryLocation]})]}),y(a.status+"-delivery")]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4 pb-4 border-b border-border",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Contract Value"}),(0,b.jsx)("p",{className:"font-semibold",children:"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Expected Delivery"}),(0,b.jsx)("p",{className:"font-semibold text-sm",children:a.requestedDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Delivery Token"}),(0,b.jsxs)("p",{className:"font-mono text-xs",children:["TOKEN-",a.id]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Status"}),(0,b.jsx)("p",{className:"font-semibold",children:"Ready"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.default,{href:`/vendor/portal/delivery/${a.id}`,className:"flex-1",children:(0,b.jsxs)(e.Button,{className:"w-full bg-primary hover:bg-primary/90",children:[(0,b.jsx)(j,{className:"w-4 h-4 mr-2"}),"Mark Delivered"]})}),(0,b.jsxs)(e.Button,{variant:"outline",className:"flex-1 bg-transparent",children:[(0,b.jsx)(k.AlertCircle,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})},a.id)):(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"No active contracts"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awarded quotes will appear here with delivery details"})]})})})}),(0,b.jsx)(g.TabsContent,{value:"delivered",className:"space-y-4",children:x.length>0?x.map(a=>(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.CheckCircle,{className:"w-5 h-5 text-green-600"}),(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.item})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.project}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Delivered ",a.deliveredAt]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-lg font-bold text-primary",children:a.price}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a.quantity," ",a.unit]})]})]})})},a.id)):(0,b.jsx)(f.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsx)(f.CardContent,{className:"pt-6 text-center text-muted-foreground",children:"No completed deliveries"})})})]})]})]})}function r(){return(0,b.jsx)(p.ProtectedRoute,{requiredRole:"vendor",children:(0,b.jsx)(q,{})})}a.s(["default",()=>r],23519)}];

//# sourceMappingURL=_8b1b716e._.js.map