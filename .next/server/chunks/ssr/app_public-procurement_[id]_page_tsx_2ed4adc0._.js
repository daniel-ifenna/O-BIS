module.exports=[55578,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(40695),g=a.i(3130),h=a.i(5522),i=a.i(17171),j=a.i(46893),k=a.i(13749),l=a.i(92759),m=a.i(70106);let n=(0,m.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var o=a.i(41675),p=a.i(24987);let q=(0,m.default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var r=a.i(63491);function s(){let a=(0,e.useParams)(),{getProcurement:m,addQuote:s,getQuotes:t}=(0,r.useProcurements)(),u=m(a.id),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)({vendorName:"",vendorEmail:"",pricePerUnit:"",totalPrice:"",deliveryDays:"",deliveryDate:"",notes:""}),[z,A]=(0,c.useState)(null),B=a=>{let{name:b,value:c}=a.target;y(a=>({...a,[b]:c}))},C=()=>((Number.parseFloat(x.pricePerUnit)||0)*(u?.quantity||0)).toLocaleString();if(!u)return(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)(g.Card,{className:"bg-card/60 border-border/50",children:(0,b.jsxs)(g.CardContent,{className:"pt-6 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Procurement request not found"}),(0,b.jsx)(d.default,{href:"/public-procurement",children:(0,b.jsx)(f.Button,{className:"bg-accent hover:bg-accent/90",children:"Back to Opportunities"})})]})})});let D=t(u.id),[E,F]=(0,c.useState)("desc"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),K=D.filter(a=>{var b;return!(b=a.recordDate)||(!G||!(b<G))&&(!I||!(b>I))}).sort((a,b)=>{let c=a?.recordDate||"",d=b?.recordDate||"";return"desc"===E?d.localeCompare(c):c.localeCompare(d)});return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/public-procurement",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(k.ChevronLeft,{className:"w-5 h-5"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:u.item}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Request ID: ",u.id]})]})]})}),(0,b.jsx)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,b.jsxs)(g.Card,{className:"bg-card/60 border-border/50",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{children:"Request Details"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{className:"text-xs text-muted-foreground",children:"Item"}),(0,b.jsx)("p",{className:"font-semibold",children:u.item})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{className:"text-xs text-muted-foreground",children:"Quantity"}),(0,b.jsxs)("p",{className:"font-semibold",children:[u.quantity," ",u.unit]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{className:"text-xs text-muted-foreground",children:"Specification"}),(0,b.jsx)("p",{className:"text-foreground",children:u.specification})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.MapPin,{className:"w-4 h-4 text-accent"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Delivery Location"}),(0,b.jsx)("p",{className:"font-semibold",children:u.deliveryLocation})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Calendar,{className:"w-4 h-4 text-accent"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requested By"}),(0,b.jsx)("p",{className:"font-semibold",children:u.requestedDate})]})]})]})]})]}),v?(0,b.jsxs)(g.Card,{className:"bg-card/60 border-border/50",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Submit Your Quote"}),(0,b.jsx)(g.CardDescription,{children:"Provide your pricing and delivery terms"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),(async()=>{let a;if(!u)return;if(z){let b=new FormData;b.append("file",z);try{let c=await fetch("/api/uploads/quotation",{method:"POST",body:b});c.ok&&(a=(await c.json()).url)}catch{}}let b={id:`quote-${Date.now()}`,procurementRequestId:u.id,vendorId:`vendor-${Date.now()}`,vendorName:x.vendorName,vendorEmail:x.vendorEmail,pricePerUnit:x.pricePerUnit,totalPrice:x.totalPrice||C(),deliveryDays:Number.parseInt(x.deliveryDays),deliveryDate:x.deliveryDate,submittedAt:new Date().toISOString(),status:"pending",notes:x.notes,proposalUrl:a};await s(u.id,b),y({vendorName:"",vendorEmail:"",pricePerUnit:"",totalPrice:"",deliveryDays:"",deliveryDate:"",notes:""}),A(null),w(!1)})()},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"vendorName",children:"Your Company Name *"}),(0,b.jsx)(h.Input,{id:"vendorName",name:"vendorName",placeholder:"Your company name",value:x.vendorName,onChange:B,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"vendorEmail",children:"Email Address *"}),(0,b.jsx)(h.Input,{id:"vendorEmail",name:"vendorEmail",type:"email",placeholder:"your@company.com",value:x.vendorEmail,onChange:B,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"proposalFile",children:"Upload Quotation (PDF/DOC)"}),(0,b.jsx)(h.Input,{id:"proposalFile",name:"proposalFile",type:"file",accept:".pdf,.doc,.docx",onChange:a=>A(a.target.files?.[0]||null)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Attach your detailed quotation document. Accepted formats: PDF, DOC, DOCX."})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"pricePerUnit",children:"Price Per Unit *"}),(0,b.jsx)(h.Input,{id:"pricePerUnit",name:"pricePerUnit",placeholder:"e.g., 45000",value:x.pricePerUnit,onChange:B,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"totalPrice",children:"Total Price (Auto-calculated)"}),(0,b.jsx)(h.Input,{id:"totalPrice",name:"totalPrice",placeholder:C(),disabled:!0,className:"bg-muted"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"deliveryDays",children:"Delivery Days *"}),(0,b.jsx)(h.Input,{id:"deliveryDays",name:"deliveryDays",type:"number",placeholder:"e.g., 3",value:x.deliveryDays,onChange:B,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"deliveryDate",children:"Delivery Date *"}),(0,b.jsx)(h.Input,{id:"deliveryDate",name:"deliveryDate",type:"date",value:x.deliveryDate,onChange:B,required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"notes",children:"Additional Notes"}),(0,b.jsx)(j.Textarea,{id:"notes",name:"notes",placeholder:"Any additional information about your quote",value:x.notes,onChange:B,className:"min-h-24"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",className:"flex-1 bg-transparent",onClick:()=>w(!1),children:"Cancel"}),(0,b.jsxs)(f.Button,{type:"submit",className:"flex-1 bg-accent hover:bg-accent/90",children:[(0,b.jsx)(l.Send,{className:"w-4 h-4 mr-2"}),"Submit Quote"]})]})]})})]}):(0,b.jsxs)(f.Button,{onClick:()=>w(!0),className:"w-full bg-accent hover:bg-accent/90 h-12 text-base",children:[(0,b.jsx)(l.Send,{className:"w-4 h-4 mr-2"}),"Submit Your Quote"]}),D.length>0&&(0,b.jsxs)(g.Card,{className:"bg-card/60 border-border/50",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{children:["Quotes Submitted (",K.length,")"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground",children:"Sort"}),(0,b.jsxs)("select",{className:"border rounded px-2 py-1 bg-background",value:E,onChange:a=>F(a.target.value),children:[(0,b.jsx)("option",{value:"desc",children:"Newest"}),(0,b.jsx)("option",{value:"asc",children:"Oldest"})]}),(0,b.jsx)("input",{type:"date",className:"border rounded px-2 py-1 bg-background",value:G,onChange:a=>H(a.target.value)}),(0,b.jsx)("input",{type:"date",className:"border rounded px-2 py-1 bg-background",value:I,onChange:a=>J(a.target.value)})]})]})}),(0,b.jsx)(g.CardContent,{className:"space-y-4",children:K.map(a=>(0,b.jsxs)("div",{className:"border border-border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.vendorName}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.vendorEmail})]}),(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-semibold",children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-3 border-t border-border/50",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Price"}),(0,b.jsx)("p",{className:"font-semibold text-accent",children:a.totalPrice})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),(0,b.jsxs)("p",{className:"font-semibold",children:[a.deliveryDays," days"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"By Date"}),(0,b.jsx)("p",{className:"font-semibold",children:a.deliveryDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Submitted"}),(0,b.jsx)("p",{className:"font-semibold",children:`${a.recordDate??""}${a.recordDate?" ":""}${a.recordTime??""}`||a.submittedAt})]})]}),a.notes&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-border/50",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Notes"}),(0,b.jsx)("p",{className:"text-sm",children:a.notes})]})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(g.Card,{className:"bg-card/60 border-border/50",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-sm",children:"Request Status"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),(0,b.jsx)("p",{className:"font-semibold capitalize text-accent",children:u.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Posted"}),(0,b.jsx)("p",{className:"font-semibold",children:u.createdAt})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Quotes"}),(0,b.jsx)("p",{className:"font-semibold",children:D.length})]})]})]}),(0,b.jsxs)(g.Card,{className:"bg-accent/5 border-accent/20",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-sm",children:"About This Request"})}),(0,b.jsxs)(g.CardContent,{className:"space-y-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(q,{className:"w-4 h-4 text-accent flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Verified Buyer"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Project from trusted manager"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(n,{className:"w-4 h-4 text-accent flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:"Professional Process"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Competitive bidding system"})]})]})]})]})]})]})})]})}a.s(["default",()=>s],55578)}];

//# sourceMappingURL=app_public-procurement_%5Bid%5D_page_tsx_2ed4adc0._.js.map