{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\nconst protectedRoots = [\"/manager\", \"/contractor\", \"/vendor\"]\n\nexport function middleware(request: NextRequest) {\n  const pathname = request.nextUrl.pathname\n  const isProtected = protectedRoots.some((p) => pathname.startsWith(p))\n  if (!isProtected) return NextResponse.next()\n\n  const isSignIn = pathname.endsWith(\"/sign-in\") || pathname.includes(\"/auth\")\n  if (isSignIn) return NextResponse.next()\n\n  const roleCookie = request.cookies.get(\"auth_role\")?.value || \"\"\n\n  if (!roleCookie) {\n    if (pathname.startsWith(\"/manager\")) return NextResponse.redirect(new URL(\"/auth/sign-in\", request.url))\n    if (pathname.startsWith(\"/contractor\")) return NextResponse.redirect(new URL(\"/contractor/sign-in\", request.url))\n    if (pathname.startsWith(\"/vendor\")) return NextResponse.redirect(new URL(\"/vendor/sign-in\", request.url))\n    return NextResponse.redirect(new URL(\"/auth/sign-in\", request.url))\n  }\n\n  if (pathname.startsWith(\"/manager\") && roleCookie !== \"manager\") {\n    const target = roleCookie === \"contractor\" ? \"/contractor/dashboard\" : \"/vendor/portal\"\n    return NextResponse.redirect(new URL(target, request.url))\n  }\n  if (pathname.startsWith(\"/contractor\") && roleCookie !== \"contractor\") {\n    const target = roleCookie === \"manager\" ? \"/manager/dashboard\" : \"/vendor/portal\"\n    return NextResponse.redirect(new URL(target, request.url))\n  }\n  if (pathname.startsWith(\"/vendor\") && roleCookie !== \"vendor\") {\n    const target = roleCookie === \"manager\" ? \"/manager/dashboard\" : \"/contractor/dashboard\"\n    return NextResponse.redirect(new URL(target, request.url))\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\"/manager/:path*\", \"/contractor/:path*\", \"/vendor/:path*\"],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,iBAAiB;IAAC;IAAY;IAAe;CAAU;AAEtD,SAAS,WAAW,OAAoB;IAC7C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IACzC,MAAM,cAAc,eAAe,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;IACnE,IAAI,CAAC,aAAa,OAAO,gMAAY,CAAC,IAAI;IAE1C,MAAM,WAAW,SAAS,QAAQ,CAAC,eAAe,SAAS,QAAQ,CAAC;IACpE,IAAI,UAAU,OAAO,gMAAY,CAAC,IAAI;IAEtC,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC,cAAc,SAAS;IAE9D,IAAI,CAAC,YAAY;QACf,IAAI,SAAS,UAAU,CAAC,aAAa,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAiB,QAAQ,GAAG;QACtG,IAAI,SAAS,UAAU,CAAC,gBAAgB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,uBAAuB,QAAQ,GAAG;QAC/G,IAAI,SAAS,UAAU,CAAC,YAAY,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,mBAAmB,QAAQ,GAAG;QACvG,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,iBAAiB,QAAQ,GAAG;IACnE;IAEA,IAAI,SAAS,UAAU,CAAC,eAAe,eAAe,WAAW;QAC/D,MAAM,SAAS,eAAe,eAAe,0BAA0B;QACvE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,QAAQ,QAAQ,GAAG;IAC1D;IACA,IAAI,SAAS,UAAU,CAAC,kBAAkB,eAAe,cAAc;QACrE,MAAM,SAAS,eAAe,YAAY,uBAAuB;QACjE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,QAAQ,QAAQ,GAAG;IAC1D;IACA,IAAI,SAAS,UAAU,CAAC,cAAc,eAAe,UAAU;QAC7D,MAAM,SAAS,eAAe,YAAY,uBAAuB;QACjE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,QAAQ,QAAQ,GAAG;IAC1D;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAmB;QAAsB;KAAiB;AACtE"}}]
}